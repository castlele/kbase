# Первая часть (LVM+RAID):

## 1. **Настройка RAID:**
    - Создайте RAID-массив с использованием технологии RAID 5 (или другой подходящей конфигурации) на трех физических дисках.

**Решение:**

1. Создал 3 диска по 3GB:
![[Pasted image 20241108171443.png]]
![[Pasted image 20241108183623.png]]

2. Зануляем суперблоки:
![[Pasted image 20241108184236.png]]

> Ранее диски не использовались

3. Коммандой `mdadm --create --verbose /dev/md0 --level=5 --raid-devices=3 /dev/sda /dev/sdb /dev/sdc` содаю raid 5. В консоль выводится следующий результат:
   ![[Pasted image 20241108184521.png]]
## 2. **Настройка LVM:**
    - Создайте физические тома на RAID-массиве.
    - Создайте группу томов (VG) на основе физических томов.
    - Создайте логический том (LV) на основе группы томов.

**Решение:*

1. Коммандой `pvcreaate /dev/md0` создаю физический том:
![[Pasted image 20241109195406.png]]

2. Коммандой `vgcreate vg0 /dev/md0` создаю группу томов на основе ранее созданного физического:
![[Pasted image 20241109195521.png]]

3. Коммандой `lvcreate -L 2G -n lv0 vg0` создаю логический том:
 ![[Pasted image 20241109195845.png]]
![[Pasted image 20241109200025.png]]

## 3. **Форматирование и монтирование файловой системы:**
    - Отформатируйте логический том в файловую систему ext4.
    - Смонтируйте файловую систему в директорию.

**Решение:**

1. Форматирую логический том в файловую систему ext4 с помощью команды `mkfs.ext4 /dev/vg0/lv0`:
![[Pasted image 20241109200302.png]]

3. Монтирую файловую систему в директорию с помощью команды `mount /dev/vg0/lv0 /mnt`:
![[Pasted image 20241109200321.png]]

## 4. **Эмуляция отказа диска:**
    - Эмулируйте отказ одного из дисков в RAID-массиве.
    - Проверьте, что система продолжает работать и доступ к данным сохраняется.

**Решение:**

1. Емулирую отказ диска:
![[Pasted image 20241109200515.png]]
![[Pasted image 20241109200545.png]]

2. Пробуем создать файл, все работает:
![[Pasted image 20241109202159.png]]
## 5. **Восстановление и проверка:**
    - Восстановите отказавший диск и добавьте его обратно в RAID-массив.
    - Проверьте процесс восстановления и убедитесь, что данные корректно синхронизированы.

**Решение:**

1. Восстанавливаем отказавший диск `mdadm /dev/md0 --add /dev/sdb`:
![[Pasted image 20241109202249.png]]

2. Проверяем процесс восстановление и что данные корректно синхронизированы `mdadm --detail --scan /dev/md0`:
![[Pasted image 20241109202515.png]]

# Вторая часть (RAID+LVM):

## 1. **Настройка LVM:**
    - Создайте физические тома на отдельных физических дисках (не обязательно использовать RAID на этом этапе).
    - Создайте группу томов (VG) на основе физических томов.
    - Создайте логический том (LV) на основе группы томов.

**Решение:**

1. Создаю физические тома `pvcreate /dev/sdd` `pvcreate /dev/sde` 
2. Создаю группы томов `vgcreate vg0 /dev/sdd /dev/sde`
3. Создаю логическую группу `lvcreate -L 2G -n lv1 vg1`
![[Pasted image 20241109204418.png]]
## 2. **Настройка RAID:**
    - Создайте RAID-массив на основе логических томов (например, RAID 1 или RAID 5).
    - Проверьте, что RAID-массив успешно создан и работает корректно.

**Решение:**

1. Создаю RAID массив `mdadm --create /dev/md1 --level=1 --raid-devices=2 /dev/vg0/lv0 /dev/sde`
![[Pasted image 20241110115308.png]]

2. Массив работает корректно:
![[Pasted image 20241110115408.png]]

## 3. **Форматирование и монтирование файловой системы:**
    - Отформатируйте RAID-массив в файловую систему (например, ext4).
    - Смонтируйте файловую систему в директорию (например, /mnt/data).

**Решение:**

1. Форматирование в файловую систему:
![[Pasted image 20241110115629.png]]

2. Мотирую файловую систему:
 ![[Pasted image 20241110115800.png]]

## 4. **Эмуляция отказа диска:**
    - Эмулируйте отказ одного из дисков в RAID-массиве.
    - Проверьте, что система продолжает работать и доступ к данным сохраняется.

**Решение:**

1. Эмуляция отказа:
![[Pasted image 20241110120008.png]]

2. Проверка, что система продолжает работать:
![[Pasted image 20241110120049.png]]

## 5. **Восстановление и проверка:**
    - Восстановите отказавший диск и добавьте его обратно в RAID-массив.
    - Проверьте процесс восстановления и убедитесь, что данные корректно синхронизированы.

**Решение:**

1. Восстановление:
![[Pasted image 20241110120239.png]]

2. Данные корректно синхронизированы:
![[Pasted image 20241110120313.png]]
